<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">

        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="../../../style/master.css">
        <link rel="stylesheet" href="../../../style/left_bar.css">
        <link rel="stylesheet" href="../../../style/documentation.css">
        <link rel="icon" type="image/x-icon" href="../../../image/master/Datasys.ico">

        <title>Infrastructure réseau</title>
    </head>

    <body>

        <div id="header">
            <div id="logo_header"  onclick="location.href='/'">
                <img src="../../../image/master/Datasys.png" alt="Datasys logo">
                <h1>Datasys</h1>
            </div>
            <div>
                <a href="../../../index.html">Home</a>
                <a id="current_place" href="/">Architecture</a>
                <a href="../../Exploitation/getting_started.html">Exploitation</a>
            </div>
        </div>


        <div id="body">
            <div id="left_bar">
                <ul>
                    <li>
                        <h2><a href="../../Architecture/def_reseau/def_réseau.html">Definition réseau</a></h2>
                        <ul>
                            <li><a href="../../Architecture/def_reseau/mise_en_place_shema_reseau.html">Schéma réseau</a></li>
                            <li><a href="../../Architecture/def_reseau/mise_en_place_plan_adress.html">Plan d'adressage</a></li>
                        </ul>
                    </li>

                    <li>
                        <h2><a href="../../Architecture/implementation_services/implem_réseau.html">Implementation et repartition des services</a></h2>
                        <ul>
                            <li><a href="../../Architecture/implementation_services/serveur_web.html">Serveur Web</a></li>
                            <li><a href="../../Architecture/implementation_services/serveur_backup.html">Serveur Backup</a></li>
                            <li><a href="../../Architecture/implementation_services/Poste_de_travail.html">Poste de travail</a></li>
                            <li><a href="../../Architecture/implementation_services/Securité_et_protection.html">Secu & protection</a></li>  
                        </ul>
                    </li>

                    <li>
                        <h2><a href="../../Architecture/installation_systeme/install_services.html">Installation système</a></h2>
                        <ul>
                            <li><a href="../../Architecture/installation_systeme/mise_en_fonction_linux.html">Machine linux</a></li>
                            <li><a href="../../Architecture/installation_systeme/mise_en_fonction_windows.html">Client windows</a></li>
                            <li><a href="../../Architecture/installation_systeme/mise_en_fonction_pfsense.html">Pare-feu avec pfsense</a></li>
                        </ul>
                    </li>

                    <li>
                        <h2><a href="../../Architecture/Installation_réseau/install_réseau.html">Installation réseau</a></h2>
                        <ul>
                            <li><a href="../../Architecture/Installation_réseau/config_firewall.html">Configuration firewall</a></li>
                            <li><a href="../../Architecture/Installation_réseau/config_server.html">Configuration serveur</a></li>
                            <li><a href="../../Architecture/Installation_réseau/config_client.html">Configuration client</a></li>
                        </ul>
                    </li>

                    <li>
                        <h2><a href="../../Architecture/installation_services/install_services.html">Installation services</a></h2>
                        <ul>
                            <li><a href="../../Architecture/installation_services/install_serv_web.html">Installation serveur web</a></li>
                            <li><a href="../../Architecture/installation_services/install_syst_backup.html">Installation système de backup</a></li>
                        </ul>
                    </li>

                    <li>
                        <h2><a href="../../Architecture/Bonnes_pratiques/bonne_pratique.html">Bonnes Pratiques</a></h2>
                        <ul>
                            <li><a href="../../Architecture/Bonnes_pratiques/ajouter_poste_travail.html">Ajout d'un poste de travail</a></li>
                            <li><a href="../../Architecture/Bonnes_pratiques/ajouter_nouveau_serv.html">ajout d'un serveur</a></li>
                            <li><a href="../../Architecture/Bonnes_pratiques/autre.html">Autres</a></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div id="content">
                <h1>Installation réseau - Configuration du firewall</h1>
                <h2>Configuration pfSense</h2>
                <p>Afin de configurer votre réseau local ainsi que votre pare-feu nous devons au préalable l’avoir correctement installé.<br>
                    Afin d’accéder à l’interface graphique de pfSense deux solution s’offre à vous :<br>
                    Depuis le réseau local vous n’aurez qu’à rentrer l’ip LAN de votre pare-feu (cf. photo suivante).<br>
                    Depuis le réseau WAN vous devrez au préalable rentrer dans le shell du pare-feu (commande 8) puis entrer la commande suivante <pre><code> pfctl -d </pre></code>
                    Enfin vous pourrez rentre l’ip WAN du pare-feu depuis votre navigateur.</p>
                <img src="../../../image/archi/pfminal.png">
                <p class="legend">Après chaque modification importante sur la configuration du pare-feu vous devrez revenir entrer cette commande de nouveau.</p>
                <br>
                <p>Une fois connecté depuis votre navigateur sur l’ip du parefeu vous devrez entre le nom d’utilisateur « admin » et le mot de passe par défaut « pfsense ». </p>
                <img src="../../../image/archi/pfligne.png"> </br>
                <p>Ensuite s’en suivra une configuration classique, nous vous laissons le soin de lire attentivement chacune des étapes de l’installation et d’y remplir les informations demandées. Ici nous n’aborderons que les points primordiaux au bon fonctionnement de notre réseau :</p>
                <img src="../../../image/archi/setuppf.png">
                <p class="legend">étape 1</p>
                <p>A cette étape de l’installation, pfSense vous demande de sélectionner une ip statique pour l’interface réseau local (LAN) du pare-feu. Ici nous choisissons la dernière ip utilisable du réseau ainsi que le masque de sous réseau que nous avions définit.
                    Si l’installation se passe correctement vous devriez arriver sur la page suivante :
                </p>
                <img src="../../../image/archi/setuppf2.png">
                <p class="legend">étape 2</p>
                <p>La prochaine fois que vous vous connecterez à pfSense vous devriez arrivez sur votre tableau de bord :</p>
                <img src="../../../image/archi/setuppf3.png">
                <p class="legend">étape 3</p>
                <br>
                <h2>Ouverture des ports et acces internet</h2>
                <p>Désormais nous pouvons commencer à configurer plus en détail le pare-feu.
                    Premièrement nous souhaitons que notre réseau local puisse avoir accès à internet au travers de notre pare-feu. Pour cela nous devons autoriser les port http et HTTPS à passer.</p>
                <img src="../../../image/archi/setuppf4.png">
                <p class="legend">étape 1</p>
                <img src="../../../image/archi/setuppf5.png">
                <p class="legend">étape 2</p>
                <img src="../../../image/archi/setuppf6.png">
                <p class="legend">étape 3</p>
                <p>Pour ajouter une nouvelle règle :</p>
                    1.	Choisir si la règle va permettre ou bloquer la règle suivante<br>
                    2.	Choisir sur quelle interface réseau la règle va s’appliquer<br>
                    3.	Choisir sur quel protocole que cette règle va être appliquée<br>
                    4.	La source doit être choisis ici, nous sélectionnerons « any » afin de sélectionner toutes les connexions entrantes<br>
                    5.	Ici nous sélectionnerons la destination, soit « WAN address » puis le port utilisé : HTTP (80)<br>
                    Nous pouvons traduire cette règle par :<br>
                    « Nous laissons passer toutes les connexions sortantes du réseau en direction d’une adresse WAN passant par le port http (80) et utilisant le protocole TCP. »<br>
                    Il faut désormais créer une règle identique mais utilisant les port HTTPS (443).<br>
                    Une fois les règles créer le résultat devrait être le suivant :<br>
                </p>
                <img src="../../../image/archi/setuppf7.png">
                <p class="legend">étape 4</p>
                <br>
                <h2>DHCP</h2>
                <p>Maintenant que nous autorisons l’utilisation des ports 80 et 443 sur notre réseau, il ne nous reste plus qu’à configurer la gestion DHCP du réseau local par pfSense.</p>
                <img src="../../../image/archi/setuppf8.png">
                <p class="legend">étape 5</p>
                <img src="../../../image/archi/setuppf9.png">
                <p class="legend">étape 6</p>
                <p>1.	Activer l’utilisation de DHCP sur l’interface LAN<br>
                    2.	Bien vérifier que les informations correspondent au plan réseau, dans le cas contraire vous devrez réinstaller les paramètres d’origine de pfSense afin de rentrer des informations valides<br>
                    3.	Ici vous rentrez la plage d’ip disponible qui seront distribué automatiquement au poste de travail connecté sur votre réseau local.<br>
                    4.	Nous conseillons de laisser un peu de marche pour les ip statique dans le cas où vous souhaitez ajoutez de nouvelle machine en nécessitant.<br>

                    Félicitation, il ne vous reste plus qu’à sauvegarder et à redémarrer votre pare-feu.<br>
                </p>
            </div>
        </div>

        <div id="footer">
            <div>
                <div class="footer-col">
                    <h4>Team</h4>
                    <ul id="team_ul">
                        <li><a target="_blank" href="https://github.com/Nimajjj">Borello Benjamin</a></li>
                        <li><a target="_blank" href="https://github.com/Mkheir13">Mederreg Kheir-eddine</a></li>
                        <li><a target="_blank" href="https://github.com/V3luxx">Poetsch Artur</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Contact Us</h4>
                    <p>Datasys.support@gmail.fr</p>
                    <p>04.84.89.50.96</p>
                </div>
            </div>
            <p>Copyright © © 2022. Tous droits réservés.</p>
        </div>

    </body>
</html>